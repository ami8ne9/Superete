<Window x:Class="Superete.GlobalButtonWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="GlobalButtonWindow"
        Width="130" Height="50"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize">

    <Grid>
        <Button x:Name="KeyboardButton"
                Width="40"
                Height="40"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Click="KeyboardButton_Click"
                Cursor="Hand"
                BorderThickness="0"
                Padding="8"
                Opacity="0.4"
                MouseEnter="KeyboardButton_MouseEnter"
                MouseLeave="KeyboardButton_MouseLeave">
            <Button.Resources>
                <Storyboard x:Key="ExpandAnimation">
                    <DoubleAnimation Storyboard.TargetProperty="Width"
                                   To="120" Duration="0:0:0.2">
                        <DoubleAnimation.EasingFunction>
                            <QuadraticEase EasingMode="EaseOut"/>
                        </DoubleAnimation.EasingFunction>
                    </DoubleAnimation>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                   To="1.0" Duration="0:0:0.2"/>
                </Storyboard>

                <Storyboard x:Key="CollapseAnimation">
                    <DoubleAnimation Storyboard.TargetProperty="Width"
                                   To="40" Duration="0:0:0.2">
                        <DoubleAnimation.EasingFunction>
                            <QuadraticEase EasingMode="EaseOut"/>
                        </DoubleAnimation.EasingFunction>
                    </DoubleAnimation>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                   To="0.4" Duration="0:0:0.2"/>
                </Storyboard>
            </Button.Resources>

            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="MainBorder"
                            Background="White" 
                            CornerRadius="8"
                            BorderBrush="#E5E7EB"
                            BorderThickness="1"
                            Padding="{TemplateBinding Padding}"
                            ClipToBounds="True">
                        <Border.Effect>
                            <DropShadowEffect Color="#000000" 
                                              BlurRadius="10" 
                                              ShadowDepth="2" 
                                              Opacity="0.1"/>
                        </Border.Effect>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Keyboard Icon -->
                            <Viewbox Grid.Column="0" Width="20" Height="20" VerticalAlignment="Center">
                                <Canvas Width="24" Height="24">
                                    <!-- Keyboard outline -->
                                    <Rectangle Width="22" Height="14" Canvas.Left="1" Canvas.Top="5" 
                                               Stroke="#374151" StrokeThickness="1.5" 
                                               RadiusX="2" RadiusY="2" Fill="Transparent"/>
                                    <!-- Keys -->
                                    <Rectangle Width="3" Height="3" Canvas.Left="3" Canvas.Top="7" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="7" Canvas.Top="7" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="11" Canvas.Top="7" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="15" Canvas.Top="7" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="19" Canvas.Top="7" Fill="#6B7280"/>

                                    <Rectangle Width="3" Height="3" Canvas.Left="3" Canvas.Top="11" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="7" Canvas.Top="11" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="11" Canvas.Top="11" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="15" Canvas.Top="11" Fill="#6B7280"/>
                                    <Rectangle Width="3" Height="3" Canvas.Left="19" Canvas.Top="11" Fill="#6B7280"/>

                                    <!-- Spacebar -->
                                    <Rectangle Width="12" Height="2.5" Canvas.Left="6" Canvas.Top="15.5" Fill="#6B7280" RadiusX="1" RadiusY="1"/>
                                </Canvas>
                            </Viewbox>

                            <!-- Text (initially hidden) -->
                            <TextBlock x:Name="ClavierText"
                                      Grid.Column="1"
                                      Text="Clavier" 
                                      FontSize="13" 
                                      FontWeight="SemiBold"
                                      Foreground="#1F2937"
                                      VerticalAlignment="Center"
                                      Margin="8,0,0,0"
                                      Opacity="0"/>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="MainBorder" Property="Background" Value="#F9FAFB"/>
                            <Setter TargetName="MainBorder" Property="BorderBrush" Value="#D1D5DB"/>
                            <Setter TargetName="ClavierText" Property="Opacity" Value="1"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="MainBorder" Property="Background" Value="#F3F4F6"/>
                            <Setter TargetName="MainBorder" Property="BorderBrush" Value="#9CA3AF"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Button.Template>
        </Button>
    </Grid>
</Window>